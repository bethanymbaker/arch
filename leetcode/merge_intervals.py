def merge(intervals):
    sorted_intervals = sorted(intervals, key=lambda i: i[0])
    merged_intervals = []
    left_interval = sorted_intervals.pop(0)
    for right_interval in sorted_intervals:
        if right_interval[0] <= left_interval[1]:
            merged_interval = [left_interval[0], max(right_interval[1], left_interval[1])]
            left_interval = merged_interval
        else:
            merged_intervals.append(left_interval)
            left_interval = right_interval
    merged_intervals.append(left_interval)
    return merged_intervals


# ints = [[1, 3], [2, 6], [8, 10], [15, 18]]
ints = [[361, 369], [146, 153], [302, 302], [317, 322], [73, 88], [440, 448], [182, 183], [123, 130], [440, 448],
        [147, 154], [241, 253], [226, 242], [387, 400], [392, 398], [444, 445], [106, 112], [81, 86], [325, 329],
        [317, 331], [489, 500], [170, 172], [451, 463], [495, 501], [312, 320], [466, 477], [435, 443], [455, 457],
        [56, 59], [415, 423], [61, 72], [70, 77], [17, 28], [272, 274], [387, 397], [189, 198], [333, 352], [11, 15],
        [63, 69], [211, 226], [294, 303], [39, 49], [237, 251], [244, 250], [337, 348], [94, 112], [222, 238],
        [418, 430], [20, 30], [286, 293], [132, 147], [136, 153], [186, 193], [454, 464], [6, 23], [477, 489], [46, 62],
        [234, 238], [11, 21], [430, 430], [341, 357], [451, 467], [393, 402], [360, 373], [411, 429], [320, 324],
        [474, 483], [361, 373], [308, 323], [262, 276], [332, 344], [319, 330], [460, 473], [15, 18], [384, 401],
        [24, 41], [173, 188], [493, 511], [196, 209], [331, 338], [204, 208], [151, 169], [165, 170], [190, 203],
        [32, 37], [288, 305], [249, 256], [448, 457], [12, 27], [33, 49], [112, 121], [474, 491], [236, 255], [56, 68],
        [25, 44], [39, 48], [95, 98], [259, 259], [260, 269], [234, 238], [106, 120], [361, 368], [333, 334],
        [417, 422], [476, 478], [94, 94], [63, 63], [430, 449], [239, 257]]
print(merge(ints))
